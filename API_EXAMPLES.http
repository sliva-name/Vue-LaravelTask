### Переменные
@baseUrl = http://localhost:9000/api
@contentType = application/json

### ===========================================
### СТАТЬИ
### ===========================================

### Получить все статьи
GET {{baseUrl}}/articles

### Получить статью по ID с комментариями
GET {{baseUrl}}/articles/3

### Создать новую статью
POST {{baseUrl}}/articles
Content-Type: {{contentType}}

{
  "title": "Моя первая статья",
  "content": "Это содержание моей первой статьи. Здесь много полезной информации.",
  "author": "Иван Иванов"
}

### Создать статью без автора (будет anonymous)
POST {{baseUrl}}/articles
Content-Type: {{contentType}}

{
  "title": "Анонимная статья",
  "content": "Содержание анонимной статьи"
}

### Обновить статью (частично)
PUT {{baseUrl}}/articles/1
Content-Type: {{contentType}}

{
  "title": "Обновленный заголовок"
}

### Обновить статью (полностью)
PUT {{baseUrl}}/articles/1
Content-Type: {{contentType}}

{
  "title": "Полностью обновленная статья",
  "content": "Новое содержание статьи после обновления",
  "author": "Новый Автор"
}

### Удалить статью
DELETE {{baseUrl}}/articles/1

### ===========================================
### КОММЕНТАРИИ
### ===========================================

### Добавить комментарий к статье
POST {{baseUrl}}/articles/4/comments
Content-Type: {{contentType}}

{
  "author": "Петр Петров",
  "text": "Отличная статья! Очень понравилась."
}

### Добавить анонимный комментарий
POST {{baseUrl}}/articles/4/comments
Content-Type: {{contentType}}

{
  "text": "Анонимный комментарий к статье"
}

### Удалить комментарий
DELETE {{baseUrl}}/comments/4

### ===========================================
### ТЕСТИРОВАНИЕ ВАЛИДАЦИИ
### ===========================================

### Ошибка валидации - пустые поля статьи
POST {{baseUrl}}/articles
Content-Type: {{contentType}}
Accept: application/json

{
  # Отсутствуют обязательные поля "title" и "content"
}

### Ошибка валидации - слишком длинный заголовок
# @no-redirect
POST {{baseUrl}}/articles
Content-Type: {{contentType}}
Accept: application/json

{
  "title": "Очень длинный заголовок который превышает лимит в 255 символов и должен вызвать ошибку валидации потому что такие длинные заголовки не поддерживаются системой и могут вызвать проблемы с отображением и хранением данных в базе, добавим ещё несколько символов, чтобы наверняка было больше 255",
  "content": "Обычное содержание"
}

### Ошибка валидации - пустой текст комментария
# ВНИМАНИЕ: Сначала создайте статью выше, чтобы получить ID для комментария
# Или замените 1 на существующий ID статьи
POST {{baseUrl}}/articles/4/comments
Content-Type: {{contentType}}
Accept: application/json

{
  "author": "Тестовый автор"
  # Отсутствует обязательное поле "text"
}

### ===========================================
### ТЕСТИРОВАНИЕ ОШИБОК
### ===========================================

### 404 - Несуществующая статья
GET {{baseUrl}}/articles/999

### 404 - Комментарий к несуществующей статье
POST {{baseUrl}}/articles/999/comments
Content-Type: {{contentType}}

{
  "text": "Комментарий к несуществующей статье",
  "author": "Автор"
}

### 404 - Удаление несуществующего комментария
DELETE {{baseUrl}}/comments/999

### ===========================================
### ПОЛНЫЙ WORKFLOW
### ===========================================

### 1. Создать статью
POST {{baseUrl}}/articles
Content-Type: {{contentType}}

{
  "title": "Тестовая статья для workflow",
  "content": "Это тестовая статья для демонстрации полного рабочего процесса API",
  "author": "Тестовый Автор"
}

### 2. Получить созданную статью (замените ID на полученный из предыдущего запроса)
GET {{baseUrl}}/articles/12

### 3. Добавить комментарий к статье
POST {{baseUrl}}/articles/12/comments
Content-Type: {{contentType}}

{
  "author": "Комментатор",
  "text": "Первый комментарий к тестовой статье"
}

### 4. Добавить еще один комментарий
POST {{baseUrl}}/articles/12/comments
Content-Type: {{contentType}}

{
  "author": "Другой Комментатор", 
  "text": "Второй комментарий с другим мнением"
}

### 5. Получить статью с комментариями
GET {{baseUrl}}/articles/12

### 6. Обновить статью
PUT {{baseUrl}}/articles/1
Content-Type: {{contentType}}

{
  "title": "Обновленная тестовая статья",
  "content": "Обновленное содержание статьи"
}

### 7. Удалить комментарий (замените ID)
DELETE {{baseUrl}}/comments/7

### 8. Удалить статью
DELETE {{baseUrl}}/articles/12